<!doctype html>
<html lang="{{ page.lang | default: site.lang | default: 'en' }}">

  {% include head.html %}

  <body>
    <div class="container pure-g">
      {%- assign cover_bg_color = site.cover_bg_color | default: 'rgb(40, 73, 77)' -%}
      {%- assign cover_color = site.cover_color | default: 'rgb(255, 255, 255)' -%}
      {%- assign cover_image = site.cover_image -%}
      {%- if page.cover_bg_color -%}{% assign cover_bg_color = page.cover_bg_color %}{% endif %}
      {%- if page.cover_color -%}{% assign cover_color = page.cover_color %}{% endif %}
      {%- if page.cover_image -%}{% assign cover_image = page.cover_image %}{% endif %}

      <div class="sidebar-left pure-u-1 pure-u-md-1-4"
           style="background-color: {{ cover_bg_color }}; color: {{ cover_color }}; {% if cover_image %}background-image: url({{ cover_image | relative_url }});{% endif %}">
        {% include sidebar-left.html %}
      </div>

      <div class="content pure-u-1 pure-u-md-2-3">
        <header class="page-header">
          <!-- Header stays visible always -->
          <div class="home-header-bar">
            <button type="button" class="menu-toggle" id="menu-toggle">â˜° Menu</button>

            {% if site.data.archive %}
            <ul class="home-header-menu pure-menu-list" id="menu">
              {% for item in site.data.archive %}
                <li class="pure-menu-item">
                  <a href="{{ item.url | relative_url }}"
                     class="pure-menu-link {% if page.url == item.url %}current-item{% endif %}">
                    {{ item.title }}
                  </a>
                </li>
              {% endfor %}
            </ul>
            {% endif %}
          </div>

          <h1>{{ page.title }}</h1>
        </header>

        <!-- (Removed research-content block as requested) -->

        <!-- ========================= PDF VIEWER ========================== -->
        <embed
          src="https://yucian1997.github.io/yuciantsai/assets/yucian-tsai-cv.pdf"
          type="application/pdf"
          class="pdf-viewer viewer-full"
          aria-label="Yu-Cian's CV PDF"
        />

        <div class="pdf-fallback">
          <p>
            Unable to display the PDF in your browser.
            You can
            <a href="https://yucian1997.github.io/yuciantsai/assets/yucian-tsai-cv.pdf"
               target="_blank" rel="noopener noreferrer">open the CV in a new tab</a>
            or
            <a href="https://yucian1997.github.io/yuciantsai/assets/yucian-tsai-cv.pdf"
               download>download it</a>.
          </p>
        </div>

      </div> <!-- /content -->
    </div> <!-- /container -->

    <!-- Back to top button -->
    <a href="#" onclick="backToTop()" class="back-to-top">Top &#8648;</a>

    <script>
      function backToTop() {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }

      // Toggle ONLY the menu list (not the whole header)
      document.addEventListener('DOMContentLoaded', function() {
        const menuToggle = document.getElementById('menu-toggle');
        const menu = document.getElementById('menu');

        if (!menuToggle || !menu) return;

        menuToggle.addEventListener('click', function(event) {
          event.preventDefault();
          menu.classList.toggle('open');
        });
      });
    </script>

    <!-- Styles -->
    <style>
      /* Back-to-top button */
      .back-to-top {
        position: fixed;
        right: 20px;
        bottom: 20px;
        background: #ffffff;
        border: 1px solid #007bff;
        padding: 8px 12px;
        border-radius: 4px;
        color: #007bff;
        font-size: 14px;
        text-decoration: none;
        z-index: 1000;
      }
      .back-to-top:hover {
        background: #007bff;
        color: #ffffff;
      }

      /* PDF viewer */
      .pdf-viewer.viewer-full {
        width: 100%;
        height: 90vh;
        border: none;
        margin-top: 20px;
      }

      /* Header bar (always visible) */
      .home-header-bar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 1rem;
        padding-top: 0.5rem;
      }

      /* Toggle button */
      .menu-toggle {
        font-size: 16px;
        padding: 4px 8px;
        border: 1px solid #ccc;
        background: #fff;
        cursor: pointer;
        border-radius: 4px;
      }

      /* Hide menu by default */
      .home-header-menu {
        display: none;
        list-style: none;
        margin: 0;
        padding: 0;
      }

      /* Show menu only when .open is added */
      .home-header-menu.open {
        display: block;
      }

      .home-header-menu li {
        margin: 0.25rem 0;
      }

      /* Desktop: show menu in a row when open */
      @media (min-width: 769px) {
        .home-header-menu.open {
          display: flex;
          gap: 1rem;
        }
        .home-header-menu li {
          margin: 0;
        }
      }
    </style>

  </body>
</html>
